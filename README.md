# Лабораторная работа №1

_Операции с кольцевыми матрицами и пользовательскими типами данных_

---

## Постановка задачи

Разработать программу для выполнения операций над кольцевыми матрицами, хранящими элементы различных типов (`int`, `float`).  
Система должна поддерживать:
- ввод и вывод матриц
- выполнение арифметических операций (сложение, вычитание, умножение)
- работу с элементами произвольного пользовательского типа
- отображение информации о кольцевых матрицах

---

## Описание решения

---

### Int.h / Int.c

#### Структура `Int`
```c
typedef struct Int {
    RingInfo *ringInfo;
    int integer;
} Int;
```

##### Поля:
- `ringInfo` — указатель на структуру `RingInfo`, описывающую операции кольца
- `integer` — целое значение, хранящееся в объекте

#### Функции:

- `void* sumInt(void* x, void* y)`  
    > Складывает два значения типа `Int`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x**, **y** — указатели на `Int`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый объект `Int`, содержащий сумму

- `void* minusInt(void* x)`  
    > Возвращает противоположное значение для `Int`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x** — указатель на `Int`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Int` с противоположным значением

- `void* multiInt(void* x, void* y)`  
    > Умножает два объекта типа `Int`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x**, **y** — указатели на `Int`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Результат умножения (`Int*`)

- `void printInt(void* integer)`  
    > Выводит значение `Int` на экран  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **integer** — указатель на `Int`

- `void* zeroInt()`  
    > Возвращает нулевой элемент кольца (`0`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Int`, содержащий 0

- `void* oneInt()`  
    > Возвращает единичный элемент кольца (`1`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Int`, содержащий 1

- `void* getInt(int value)`  
    > Создаёт `Int` с заданным значением  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **value** — целое значение  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Int`

- `void* collectInt(int value)`  
    > Выделяет память и инициализирует `Int` со всеми операциями кольца  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **value** — целое значение  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Указатель на `Int`

---

### Float.h / Float.c

#### Структура `Float`
```c
typedef struct Float {
    RingInfo *ringInfo;
    float real;
} Float;
```

##### Поля:
- `ringInfo` — указатель на структуру `RingInfo`, содержащую операции кольца
- `real` — число с плавающей точкой (`float`), хранимое в объекте

#### Функции:

- `void* sumFloat(void* x, void* y)`  
    > Складывает два значения типа `Float`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x**, **y** — указатели на `Float`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый объект `Float`, содержащий сумму

- `void* minusFloat(void* x)`  
    > Возвращает противоположное значение для `Float`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x** — указатель на `Float`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Float` с противоположным значением

- `void* multiFloat(void* x, void* y)`  
    > Умножает два объекта типа `Float`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **x**, **y** — указатели на `Float`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Результат умножения (`Float*`)

- `void printFloat(void* value)`  
    > Выводит значение `Float` на экран с точностью до 3 знаков после запятой  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **value** — указатель на `Float`

- `void* randomFloat()`  
    > Генерирует случайное значение `Float` в диапазоне приблизительно от 1 до 100  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Float` со случайным значением

- `void* zeroFloat()`  
    > Возвращает нулевой элемент кольца (`0.0`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Float`, содержащий 0.0

- `void* oneFloat()`  
    > Возвращает единичный элемент кольца (`1.0`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Float`, содержащий 1.0

- `void* getFloat(float value)`  
    > Создаёт `Float` с заданным значением  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **value** — значение `float`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый `Float`

- `void* collectFloat(float value)`  
    > Выделяет память и инициализирует `Float` с нужными операциями кольца  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **value** — значение `float`  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Указатель на `Float`

---

### Matrix.h / Matrix.c

#### Структура `Element`
```c
typedef struct Element {
    RingInfo *ringInfo;
    void *value;
} Element;
```

##### Поля:
- `ringInfo` — указатель на кольцо, описывающее операции над значением
- `value` — указатель на значение (`Int*`, `Float*` и др.)

---

#### Структура `Matrix`
```c
typedef struct Matrix {
    Element **data;
    int size;
} Matrix;
```

##### Поля:
- `data` — одномерный массив указателей на `Element` (размером `size × size`)
- `size` — размер квадратной матрицы

---

#### Создание

- `Matrix* randomMatrix(RingInfo* ringInfo, int size)`  
    > Создаёт квадратную матрицу заданного размера со случайными значениями  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **ringInfo** — описание операций кольца  
    >   * **size** — размер матрицы  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Указатель на новую `Matrix`

- `Matrix* E(RingInfo* ringInfo, int size)`  
    > Создаёт единичную матрицу  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Матрица, в которой диагональ содержит `one`, остальные — `zero`

- `Element* collectElement(RingInfo* ringInfo, void* value)`  
    > Оборачивает значение в `Element`  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **ringInfo** — ссылка на кольцо  
    >   * **value** — значение (`Int*`, `Float*`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Новый элемент

---

#### Декомпозиция

- `Element** getLine(int lineNumber, Matrix* matrix)`  
    > Возвращает строку матрицы по номеру (нумерация с 1)  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **lineNumber** — номер строки  
    >   * **matrix** — указатель на матрицу  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Массив указателей на `Element`

- `Element** getColumn(int columnNumber, Matrix* matrix)`  
    > Возвращает столбец матрицы по номеру (нумерация с 1)

---

#### Операции

- `Matrix* sumMatrix(Matrix* matrix1, Matrix* matrix2)`  
    > Складывает две матрицы поэлементно  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Результат записывается в `matrix1`

- `Matrix* multiMatrix(Matrix* matrix1, Matrix* matrix2)`  
    > Умножает две матрицы по правилам линейной алгебры  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Результат сохраняется в `matrix1`

- `Matrix* multiScalar(Matrix* matrix, void* multiplier)`  
    > Умножает все элементы матрицы на заданное значение  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **multiplier** — значение (`Int*`, `Float*`)  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Результат сохраняется в `matrix`

- `Matrix* sumLine(Matrix* matrix, int line1, int line2, void* multiplier)`  
    > Складывает строку `line2`, умноженную на `multiplier`, к строке `line1`

---

#### Вывод

- `void printMatrix(Matrix* matrix)`  
    > Выводит всю матрицу в табличной форме

- `void printLine(Element** line, int size)`  
    > Выводит одну строку матрицы

- `void printColumn(Element** column, int size)`  
    > Выводит один столбец матрицы

---

### RingInfo.h / RingInfo.c

#### Структура `RingInfo`
```c
typedef struct RingInfo {
    void *(*sum)(void *, void *);
    void *(*zero)();
    void *(*minus)(void *);
    void *(*multi)(void *, void *);
    void (*printValue)(void *);
    void *(*randomValue)();
    void *(*getType)();
    void *(*one)();
} RingInfo;
```

##### Поля:
- `sum` — функция сложения двух элементов
- `zero` — функция, возвращающая нулевой элемент
- `minus` — функция, возвращающая противоположный элемент
- `multi` — функция умножения двух элементов
- `printValue` — функция вывода элемента
- `randomValue` — функция генерации случайного значения
- `getType` — функция получения значения из пользовательского типа
- `one` — функция, возвращающая единичный элемент

#### Функции:

- `RingInfo* Create(...)`  
    > Создаёт структуру `RingInfo` с набором указателей на функции операций кольца  
    >
    > _ПАРАМЕТРЫ:_  
    >   * **sum** — операция сложения  
    >   * **zero** — функция, возвращающая 0  
    >   * **minus** — операция унарного минуса  
    >   * **multi** — операция умножения  
    >   * **printValue** — функция вывода  
    >   * **randomValue** — генератор случайного значения  
    >   * **getType** — функция создания значения из базового типа  
    >   * **one** — функция, возвращающая 1  
    >
    > _ВОЗВРАЩАЕТ:_  
    >   * Указатель на инициализированную структуру `RingInfo`


---

### Menu.h

#### Функции пользовательского интерфейса

- `void selectType()`  
    > Отображает меню выбора типа значений  
    >
    > Предлагает пользователю выбрать:
    > 
    > 1 — целые числа  
    >   
    > 2 — числа с плавающей точкой

- `void selectAction()`  
    > Отображает список доступных операций над матрицами:
    >
    > 1. Случайная единичная матрица  
    > 2. Получить строку  
    > 3. Получить столбец  
    > 4. Сложение матриц  
    > 5. Умножение матриц  
    > 6. Умножение на скаляр  
    > 7. Прибавить к строке линейную комбинацию другой строки

